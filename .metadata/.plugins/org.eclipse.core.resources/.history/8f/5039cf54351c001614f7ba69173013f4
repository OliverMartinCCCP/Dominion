package Model;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;

public class WriteToMySql {
	public static void main(String args[]) throws Exception
	{
		createTable();
		post();
	}
	
	public static Connection getConnection() throws Exception
	{
		try{
			String driver = "com.mysql.jdbc.Driver";
			String url = "jdbc:mysql://localhost:3306/dominion";
			String username = "root";
			String password = "";
			Class.forName(driver);
			
			Connection com = DriverManager.getConnection(url,username,password);
			System.out.println("It works!!");
			return com;
		} catch(Exception e){System.out.println(e);};
		
		return null;
	}
	

	public static void createTable() throws Exception
		{try{
			Connection com = getConnection();
			PreparedStatement create = com.prepareStatement("CREATE TABLE IF NOT EXISTS player(id int NOT NULL AUTO_INCREMENT, name varchar(255), wins int NULL DEFAULT NULL, loses int NULL DEFAULT NULL, laststep varchar(255) NULL DEFAULT NULL, PRIMARY KEY (id))");
			create.executeUpdate();	
		}catch(Exception e){System.out.println(e);}
		finally{System.out.println("function complete...");};
	}


	public static void post() throws Exception
		{
		final String var1 = "skitskitskebam";
		final int var2 = 8;
		final int var3 = 1;
		final String var4 = "Won";
		
		try{
			Connection com = getConnection();
			PreparedStatement posted = com.prepareStatement("INSERT INTO player (name, wins, loses, laststep) VALUES ('"+var1+"', '"+var2+"', '"+var3+"', '"+var4+"')");
			posted.executeUpdate();
		}catch(Exception e){System.out.println(e);}
		finally{
			System.out.println("Insert Completed");
		}
	}
	
}